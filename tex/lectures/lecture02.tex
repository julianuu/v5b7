\paragraph{Q.2} Key: bounded varioation (BV)
$F:[a,b]→ℝ$, $P=\{a=t_0<t_1<…<t_N=b\}$
\[V_F^P=\sum_{j=0}^N|F(t_j)-F(t_{j+1})|\]
is the variation of $f$ over $P$. $F$ is of bounded variation if \[T_F(a,b)=\sup_PV_F^P<∞\]
$P⊂\tilde P$ partitions $⇒V_F^P\leq V_P^{\tilde P}$
\begin{exa}
	\begin{enumerate}
		\item $f$ monotonic (increasing) and bounded, $|F|\leq M$ $⇒F∈\BV$
			\[V_F^P=\sum_{j=1}^N|F(t_j)-F(t_{j-1})|=F(b)-F(a)\leq 2M\]
		\item $F$ differentiable with $F'$ bounded, $|F'|\leq M$, then by mean value theorem $f∈\BV$. Or $F$ Lipschitz
		\item $F$ $α$-Hölder ($α<1$) $\not\implies F∈\BV$. Take $F:[0,1]→ℝ,\ x\mapsto\dist(x,C)^α$, where $C$ is the cantor set. $2^{n-1}$ intervals of length $3^{-n}$\[α>\frac{\log2}{\log3}⇒\sum_{n=1}^∞2^{n-1}(3^{-n})^α<∞\]
	\end{enumerate}
\end{exa}
\begin{itemize}
	\item\highl{Total variation} of $F$ on $[a,x]$ (where $a\leq x\leq b$) is \[T_F(a,x)=\sup\sum_{j=0}^N|F(t_j)-F(t_{j-1})|\]
	\item\highl{Positive variation} of $F$ on $[a,1]$ is \[P_F(a,x)=\sup\sum_{(+)}(F(t_j)-F(t_{j-1}))\quad\text{all }j:F(t_j)\geq F(t_{j-1})\]
	\item\highl{Negative variation} of $F$ on $[a,1]$ is \[N_F(a,x)=\sup\sum_{(-)}-(F(t_j)-F(t_{j-1}))\]
\end{itemize}
\begin{lem} $f:[a,b]→ℝ$. Then
	\begin{enumerate}
		\item $F(x)=F(a)+P_F(a,x)-N_F(a,x)$
		\item $T_F(a,x)=P_F(a,x)+N_F(a,x)$
	\end{enumerate}
	($∀x∈[a,b]$)
\end{lem}
recall from measure theory: $f=f^+-f^-,\ |f|=f^++f^-$
\begin{proof}
	\begin{enumerate}
		\item given $ε>0,\ ∃P=\{a=t_0<t_1<…<t_N=x\}$
			\[|PVF-\sum_{(+)}(F(t_j)-F(t_{j-1}))|<ε\]
			\[|N_F-\sum_{(-)}-(F(t_j)-F(t_{j-1})))|<ε\]
			Also \[F(x)-F(a)=\sum_{(+)}F(t_j)-F(t_{j-1})-\sum_{(-)}-(F(t_j)-F(t_{j-1}))\]
	\end{enumerate}
\end{proof}
\begin{cor} $F:[a,b]→ℝ∈\BV$ iff $F$ is the difference of two increasing bounded functions
\end{cor}
\begin{theo}
	$F:[a,b]→ℝ∈\BV⇒ F$ differentiable a.e.
\end{theo}
Wlog $f$ mononotic increasing, Here we also assume that $f$ is continuous. The missing argument for the general case will follow on page \pageref{lem:inctocont}.
\begin{lem}[of the rising sun] $G:ℝ→ℝ$ continuous. \[E=\{x∈ℝ:∃h=h_x>0\ G(x+h)>G(x)\}\]
	Then
	\begin{enumerate}
		\item $E$ is open ($E=\bigcup_{n=1}^∞(a_n,b_n)$)
		\item $g(a_n)=G(b_n)$, provided $b_n-a_n<∞$.
	\end{enumerate}
\end{lem}
\begin{proof} Let $(a_n,b_n)$ be a finite interval in the decomposition. $a_k\not\in E$ then $g(a_k)\geq G(b_k)$. Assume $G(a_k)>G(b_k)$. $∃c∈(a_k,b_k)\ g(c)=\frac{g(a_k)+g(b_k)}2$. Choose rightmost such $c$. $∃d∈(c,b_k)\ G(d)>G(c)$. But then by continuity $c$ could not have been chosen rightmost, contradiction.
\end{proof}
Can replace $ℝ$ by $[a,b]$, but then only get for $a_0=a$ that $G(a_0)\leq G(b_0)$
\begin{proof}[Proof of theorem]
	\begin{align*}
		Δ_h(F)(x)&=\frac{F(x+h)-F(x)}h\\
		D^\pm(F)(x)&=\limsup_{h→0,h><0}Δ_h(F)(x)\\
		D_\pm(F)(x)&=\liminf_{h→0,h><0}Δ_h(F)(x)
	\end{align*}
	Dini numbers. Upshot: They are all the same and finite. $D_-\leq D^-,\ D_+\leq D^+$ clear. ETS
	\begin{enumerate}
		\item $D^+(F)(x)<∞$ (a.e. $x$)\label{it:dplusleinf}
		\item $D^+(F)(x)\leq D_-(F)(x)$ (a.e. $x$)\label{it:dplusledmin}
	\end{enumerate}
	\ref{it:dplusledmin} is equivalent to $D^-(F)(x)\leq D_+(F)(x)$ by replacing $F(x)$ by $-F(-x)$ somewhere. Then $D^+\leq D_-\leq D^-\leq D_+\leq D^+<∞$.
	\begin{enumerate}
		\item[\ref{it:dplusleinf}] recall: $F$ increasing, bounded, continuous on $[a,b]$. Fix $γ>0$, \[E_γ:=\{x:D^+(F)(x)>γ\}\]
			\begin{itemize}
				\item $E_γ$ is measurable
				\item Apply rising sun to $G(x)=F(x)-γx$
					\[E_γ⊂E=\{x∈[a,b]:∃h>0\ G(x+h)>G(x)\}=\bigcup_{k=1}^∞(a_k,b_k)\]
					The condition in the set is equivalent to
					\begin{align*}
						\iff&∃h>0\ F(x+h)-γx-γh>F(x)-γx\\
						\iff&∃h>0\ \frac{F(x+h)-F(x)}h>γ\\
						⇐&D^+(F)(x)>γ
					\end{align*}
					$G(a_k)\leq G(b_k)\iff F(a_k)-γa_k\leq F(b_k)-γb_k\iffγ(b_k-a_k)\leq F(b_k)=F(a_k)$. Therefore 
					\[|E_γ|\leq|E|\leq\sum_{k=1}^∞(b_k-a_k)\leq\frac1γ\sum_{k=1}^∞(F(b_k)-F(a_k))=\frac1γ(F(b)-F(a))\]
					Take $γ→∞$, done.
			\end{itemize}
		\item[\ref{it:dplusledmin}] see Stein-Shakarchi (vol 3)
	\end{enumerate}
\end{proof}
\begin{cor}
	$F$ increasing, continuous $⇒F'$ exists a.e., measurable, nonnegative and \[∫_a^bF'(x)\md x\leq F(b)-F(a).\]
\end{cor}
\begin{proof} Let \[G_n(x)=\frac{F(x+\frac1n)-F(x)}{\frac1n}\] By the theorem, $G_h(x)→F'(x)$ ($h→0$) pointwise a.e. By Fatou \[∫_{[a,b]}F'\leq\liminf_{n→∞}∫_a^bG_n(x)\md x=\liminf_{n→∞}\dashint_b^{b+\frac1n}F(x)\md x-\dashint_a^{a+\frac1n}F(x)\md x\]
\end{proof}
Cannot do better than $\leq$: For the Devil's staircase the left hand side is 0 while the right hand side is 1.

Why is the sunrise Lemma a covering Lemma?
\[
	\left.\begin{matrix}
			f_+^*=\sup\frac1h∫_x^{x+h}|f(y)|\md y\\
			E_α^+=\{x∈ℝ:f_+^*(x)>α\}
	\end{matrix}\right\}|E_α^+|=\frac1α∫_{E_α^+}|f|
\]
Why? Let \[G(x)=∫_0^x|f(y)|\md y-αx\]
\[x∈E_α^+\iff f_+^*(x)>α\iff ∃h>0\ \frac1h∫_x^{x+h}|f(y)|\md y>α\iff ∃h>0\ G(x+h)>G(x)\]
\[\{x∈ℝ:∃h>0\ G(x+h)>G(x)\}=\bigcup_{k∈ℕ}^\cdot(a_k,b_k),\quad G(a_k)=G(b_k)\]
\[|E_α^+|=\sum_k(b_k-a_k)=\frac1α\sum_k∫_{(a_k,b_k)}|f|=\frac1α∫_{\bigcup_k(a_k,b_k)}|f|=\frac1α∫_{|E_α^+|}|f|.\]	
